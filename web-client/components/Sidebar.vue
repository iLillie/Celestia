<template>
  <aside id="sidebar"
         :class="sidebarClass"
         class="bg-white h-screen shadow-md p-4 flex flex-col gap-8 overflow-y-auto sticky top-0">

    <header :class="headerClass" class="flex py-8 px-2 ">
      <svg aria-label="it jakt" :class="logoClass" fill="none" height="24" viewBox="0 0 95 24" width="95"
           xmlns="http://www.w3.org/2000/svg">
        <path d="M30.9589 4.79622V1.26635H17.3427V4.79622H21.988V14.0551H26.3849V4.79622H30.9589Z" fill="#2C2C2C"/>
        <path d="M0 1.24272V4.74175H4.26975V20.2023H0V23.6859H12.9788V20.2023H8.60116V4.74175H12.9788V1.24272H0Z"
              fill="#2C2C2C"/>
        <path
          d="M32.8949 1.23314V16.7861C32.8949 17.3102 32.8126 17.8035 32.6482 18.2659C32.4941 18.718 32.2732 19.1085 31.9854 19.4374C31.6977 19.7662 31.3483 20.0283 30.9372 20.2235C30.5262 20.4085 30.074 20.501 29.5808 20.501C28.9642 20.501 28.4401 20.4188 28.0085 20.2543C27.5769 20.0899 27.2275 19.8381 26.9604 19.499C26.7548 19.2216 26.6007 18.8825 26.4979 18.4817C26.3952 18.0809 26.3438 17.6134 26.3438 17.079H21.997C22.0073 18.2402 22.1974 19.2524 22.5673 20.1156C22.9372 20.9788 23.4562 21.693 24.1241 22.2582C24.7818 22.8337 25.5731 23.2653 26.4979 23.553C27.4228 23.8407 28.4504 23.9846 29.5808 23.9846C30.6495 23.9846 31.6463 23.8099 32.5712 23.4605C33.5063 23.1111 34.3181 22.6179 35.0066 21.9807C35.6951 21.3436 36.2346 20.5883 36.6251 19.7148C37.0259 18.8311 37.2314 17.8548 37.2417 16.7861L37.2263 1.23314H32.8949Z"
          fill="#FC9A06"/>
        <path
          d="M51.839 23.6763H56.1858V23.4143C55.97 22.9929 55.8056 22.4894 55.6925 21.9037C55.5795 21.3179 55.523 20.578 55.523 19.684V12.5318C55.523 11.5658 55.3432 10.718 54.9835 9.98844C54.6238 9.24855 54.1254 8.63712 53.4883 8.15414C52.8512 7.67116 52.0959 7.30636 51.2224 7.05973C50.3592 6.8131 49.4241 6.68979 48.417 6.68979C47.2969 6.68979 46.3001 6.83365 45.4267 7.12139C44.5635 7.39884 43.8338 7.77906 43.2378 8.26204C42.6315 8.74502 42.1691 9.30507 41.8505 9.9422C41.5423 10.5793 41.3881 11.2524 41.3881 11.9615H45.6733C45.6733 11.6635 45.7144 11.3911 45.7966 11.1445C45.8891 10.8979 46.0278 10.6872 46.2128 10.5125C46.4183 10.3173 46.6855 10.1683 47.0143 10.0655C47.3432 9.95247 47.7336 9.89595 48.1858 9.89595C48.6996 9.89595 49.1466 9.96275 49.5268 10.0963C49.9173 10.2197 50.241 10.3995 50.4979 10.6358C50.7446 10.8619 50.9295 11.1342 51.0529 11.4528C51.1762 11.7611 51.2378 12.1105 51.2378 12.501V13.4875H48.8486C47.6155 13.4875 46.5211 13.6005 45.5654 13.8266C44.62 14.0424 43.8236 14.361 43.1762 14.7823C42.4568 15.2447 41.9173 15.8356 41.5577 16.5549C41.198 17.264 41.0182 18.0809 41.0182 19.0058C41.0182 19.7251 41.162 20.3931 41.4498 21.0096C41.7375 21.6159 42.1383 22.14 42.6521 22.5819C43.1659 23.0238 43.7773 23.368 44.4864 23.6146C45.2057 23.8613 45.9918 23.9846 46.8448 23.9846C47.3688 23.9846 47.857 23.9332 48.3091 23.8304C48.7613 23.738 49.1775 23.6044 49.5577 23.4297C49.9276 23.2653 50.2667 23.07 50.575 22.8439C50.8833 22.6179 51.1556 22.3764 51.392 22.1195C51.4433 22.4175 51.505 22.7001 51.5769 22.9672C51.6489 23.2344 51.7362 23.4708 51.839 23.6763ZM47.7542 20.6705C47.3534 20.6705 46.9989 20.6243 46.6906 20.5318C46.3926 20.429 46.1408 20.2954 45.9353 20.131C45.7298 19.9563 45.5705 19.7457 45.4575 19.499C45.3547 19.2421 45.3033 18.9647 45.3033 18.6667C45.3033 18.2864 45.3753 17.9371 45.5191 17.6185C45.663 17.2897 45.8839 17.0071 46.1819 16.7707C46.48 16.5446 46.8653 16.3699 47.338 16.2466C47.8107 16.113 48.381 16.0462 49.049 16.0462H51.2378V18.9133C51.1145 19.1291 50.945 19.3449 50.7292 19.5607C50.5134 19.7662 50.2565 19.9512 49.9584 20.1156C49.6604 20.28 49.3265 20.4136 48.9565 20.5164C48.5866 20.6191 48.1858 20.6705 47.7542 20.6705Z"
          fill="#FC9A06"/>
        <path
          d="M66.6521 16.7861L71.3843 23.6763H76.6405L69.4729 13.9499L75.7619 6.99807H70.6135L66.0047 12.054L64.7099 13.5337V0H60.4247V23.6763H64.7099V18.5896L66.6521 16.7861Z"
          fill="#FC9A06"/>
        <path
          d="M87.1993 2.91329H82.9141V6.99807H79.1068V10.158H82.9141V17.7418C82.9141 18.8414 83.058 19.7868 83.3457 20.578C83.6335 21.359 84.0445 22.0013 84.5789 22.5048C85.1029 23.0186 85.7349 23.3988 86.4748 23.6455C87.225 23.8818 88.0573 24 88.9719 24C89.4446 24 89.9225 23.9743 90.4055 23.9229C90.8987 23.8818 91.3714 23.8202 91.8236 23.738C92.2757 23.6557 92.7022 23.553 93.103 23.4297C93.5037 23.2961 93.8531 23.1419 94.1511 22.9672L93.7349 20.0231C93.5397 20.0745 93.3033 20.1259 93.0259 20.1773C92.7587 20.2286 92.471 20.2749 92.1627 20.316C91.8441 20.3674 91.5101 20.4085 91.1608 20.4393C90.8216 20.4701 90.4877 20.4855 90.1588 20.4855C89.7067 20.4855 89.2956 20.4342 88.9257 20.3314C88.566 20.2286 88.2577 20.0539 88.0008 19.8073C87.7439 19.571 87.5435 19.2524 87.3997 18.8516C87.2661 18.4406 87.1993 17.9319 87.1993 17.3256V10.158H93.4267V6.99807H87.1993V2.91329Z"
          fill="#FC9A06"/>
      </svg>
      <button :aria-expanded="isExpanded.toString()" aria-controls="sidebar" aria-label="Expand sidebar" v-on:click="collapse()">
        <span class="ri-menu-line"></span>
      </button>
    </header>

    <nav aria-label="sidebar" class="flex flex-col gap-8">
      <div v-for="navigationList in sidebar.navigationLists">
        <p :class="nameClass" class="font-semibold px-4 py-2 text-gray-600">
          {{ navigationList.name }}
        </p>
        <ul class="grid gap-4">
          <MenuItem v-for="item in navigationList.items" :key="item.id" :linkItem="item"/>
        </ul>
      </div>
    </nav>

  </aside>
</template>

<script>

export default {
  name: "Sidebar",
  data() {
    return {
      isCollapsed: false,
      isExpanded: true,
      sidebar: {
        navigationLists: [
          {
            name: "Main",
            ariaLabel: "Sidebar Main",
            items: [
              {id: 0, href: '/', icon: 'ri-home-line', text: 'Oversikt'},
              {id: 1, href: '/b', icon: 'ri-clipboard-line', text: 'Aktiviteter'},
              {id: 2, href: '/c', icon: 'ri-file-copy-2-line', text: 'Filer'},
            ]
          },
          {
            name: "Job",
            ariaLabel: "Sidebar Job",
            items: [
              {id: 3, href: '/stillinger', icon: 'ri-briefcase-3-line', text: 'Stillinger'},
              {id: 4, href: '/e', icon: 'ri-building-2-line', text: 'Selskaper'},
              {id: 5, href: '/f', icon: 'ri-contacts-book-2-line', text: 'Kontakter'},
            ]
          },
          {
            name: "Folders",
            ariaLabel: "Sidebar Folders",
            items: [
              {id: 6, href: '/g', icon: 'ri-folder-open-line', text: 'Frontend'},
              {id: 7, href: '/h', icon: 'ri-folder-open-line', text: 'Backend'},
              {id: 8, href: '/j', icon: 'ri-folder-open-line', text: 'Full-Stack'},
            ]
          },
        ],
      },
    }
  },
  computed: {
    sidebarClass() {
      return this.isCollapsed ? 'px-8 w-min' : 'clamped-width';
    },
    headerClass() {
      return this.isCollapsed ? 'justify-center' : 'justify-between';
    },
    logoClass() {
      return this.isCollapsed ? 'hidden' : '';
    },
    nameClass() {
      return this.isCollapsed ? 'text-center px-0' : '';
    }
  },
  methods: {
    collapse: function () {
      this.isCollapsed = !this.isCollapsed;
      this.isExpanded = !this.isCollapsed;
    }
  }
}
</script>

<style scoped>
/* is used in computed, but IDE doesn't recognize it */
/* TODO: Add into config? */
.clamped-width {
  width: clamp(15rem, 17vw + 1rem, 20rem);
}
</style>
